<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<style>
  button {
    background-color: white;
  }
</style>

<script>
  let clicks = [];
  let user_clicks = [];
  let iteration = 0;
  let score = 3;
  let count_user_clicks = 0;
  let good_ans = 0;

  // functions

  function rand() {
    for (i = 0; i < score; i++) {
      let rand = Math.floor((Math.random() * 4) + 1) //random number 1/4
      clicks.push(rand)
    }
  }

  function showval(i) {
    document.getElementById(clicks[i]).style = "background-color:blue;";
  }

  function hideval(i) {
    document.getElementById(clicks[i]).style = "background-color:white;";
  }

  function check_user_inputs(current_click) {
    user_clicks.push(0)
    console.log(count_user_clicks)

    if (clicks[count_user_clicks] == current_click) {
      console.log("good!")
      good_ans++
    } else {
      console.log("bad! Start again from the begining of a sequence")
      count_user_clicks = -1
    }

    count_user_clicks++
    if (clicks.length == good_ans) {
      console.log('correct sequence!')
      count_user_clicks = 0;
      good_ans = 0;
    }
  }


  // main function game
  function game() {
    rand()
    console.log(clicks)

    for (let i = 0; clicks.length > i; i++) {
      if (i == 0) timer = 1 * 1000

      timer = i * 2000;

      window.setTimeout(function() {
        showval(i)
      }, timer)

      window.setTimeout(function() {
        hideval(i)
      }, timer + 500)
    }
  }

  /* buttons one two three four */

  function one() {
    check_user_inputs(1);
  }

  function two() {
    check_user_inputs(2);
  }

  function three() {
    check_user_inputs(3);
  }

  function four() {
    check_user_inputs(4);
  }
</script>

<body onload='game()'>
  <button id='1' onclick="one()">One</button>
  <button id='2' onclick="two()">Two</button>
  <button id='3' onclick="three()">Three</button>
  <button id='4' onclick="four()">Four</button>
</body>





</html>